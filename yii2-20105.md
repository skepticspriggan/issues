# [Fix error summary always visible with CSP header (#19691)](https://github.com/yiisoft/yii2/pull/20105)

- _Type:_ Pull Request
- _State:_ closed
- _Repository:_ `yii2`
- _Created at:_ 2024-01-18 15:52:07

| Q             | A
| ------------- | ---
| Is bugfix?    | y
| New feature?  | n
| Breaks BC?    | n
| Fixed issues  | #19691 

The issue is fixed by allowing the user to specify a HTML class for an empty error summary. The CSS style corresponding to the class can be set locally in the user's project.

## Comments

## Reviews

samdark on 2024-01-18 16:47

framework/helpers/BaseHtml.php

```
@@ -1271,12 +1272,17 @@ public static function errorSummary($models, $options = [])
         $footer = ArrayHelper::remove($options, 'footer', '');
         $encode = ArrayHelper::remove($options, 'encode', true);
         $showAllErrors = ArrayHelper::remove($options, 'showAllErrors', false);
+        $emptyClass = ArrayHelper::remove($options, 'emptyClass', null);
         unset($options['header']);
         $lines = self::collectErrors($models, $encode, $showAllErrors);
         if (empty($lines)) {
             // still render the placeholder for client-side validation use
             $content = '<ul></ul>';
-            $options['style'] = isset($options['style']) ? rtrim($options['style'], ';') . '; display:none' : 'display:none';
+            if($emptyClass !== null) {
```

> ```suggestion
>             if ($emptyClass !== null) {
> ```

samdark on 2024-01-18 16:49

framework/CHANGELOG.md

```
@@ -7,6 +7,7 @@ Yii Framework 2 Change Log
 - Bug #17181: Improved `BaseUrl::isRelative($url)` performance (sammousa, bizley, rob006)
 - Bug #17191: Fixed `BaseUrl::isRelative($url)` method in `yii\helpers\BaseUrl` (ggh2e3)
 - Bug #18469: Fixed `Link::serialize(array $links)` method in `yii\web\Link` (ggh2e3)
+- Bug #19691: Fix error summary always visible with CSP header (skepticspriggan)
```

> ```suggestion
> - Bug #19691: Allow using custom class to style error summary (skepticspriggan)
> ```
